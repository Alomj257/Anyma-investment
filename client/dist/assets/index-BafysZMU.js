import{u as j,r as i,j as e}from"./index-CHS3ffuP.js";import{b as p,c as u}from"./index-Cmp9ptMe.js";import{a as g,d as N}from"./AuthService-CWGUZqPg.js";import{c as b,a as f}from"./dateTimeFormater--SVEKv5u.js";import"./iconBase-Bv3yHtYe.js";import"./index-CD1s_igV.js";const w=()=>{const o=j(),[t,l]=i.useState([]),h=async()=>{const s=await g("CUSTOMER");l(s)};i.useEffect(()=>{h()},[]),console.log(t);const x=async s=>{await N(s),h()};return e.jsx("div",{className:"bg-white admin-dashboard h-100 ",children:e.jsxs("table",{children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border-0"}),e.jsx("th",{scope:"col",className:"border-0 ",children:"Member's Name"}),e.jsx("th",{}),e.jsx("th",{scope:"col",children:"Email"}),e.jsx("th",{}),e.jsx("th",{scope:"col",children:"TOTAL INVESTMENT"}),e.jsx("th",{}),e.jsx("th",{scope:"col",children:" TOTAL AMOUNT "}),e.jsx("th",{}),e.jsx("th",{scope:"col",className:"border-0"})]})}),e.jsx("tbody",{children:t&&(t==null?void 0:t.map((s,r)=>{var a,d,n;return e.jsxs("tr",{children:[e.jsx("td",{}),e.jsxs("td",{children:[" ",e.jsxs("div",{className:"aspect-",children:[" ",(a=s==null?void 0:s.personal)==null?void 0:a.firstName," ",(d=s==null?void 0:s.personal)==null?void 0:d.lastName]})]}),e.jsx("td",{}),e.jsx("td",{children:(n=s==null?void 0:s.account)==null?void 0:n.email}),e.jsx("td",{}),e.jsx(y,{userId:s._id}),e.jsx("td",{className:" text-end",children:e.jsxs("div",{className:"d-flex gap-3",children:[e.jsx("button",{onClick:()=>o("personal-details",{state:s==null?void 0:s._id}),className:"btn text-primary bg-very-light-gray rounded-circle",children:e.jsx(p,{size:20})}),e.jsx("button",{onClick:()=>x(s==null?void 0:s._id),className:"btn bg-gray bg-very-light-gray rounded-circle text-gray",children:e.jsx(u,{size:20})})]})}),e.jsx("td",{})]},r)}))})]})})},y=({userId:o})=>{const[t,l]=i.useState(0),[h,x]=i.useState(0);return i.useEffect(()=>{(async()=>{try{const r=await f(o);let a=0,d=0;r==null||r.forEach(n=>{var m;(m=n==null?void 0:n.investors)==null||m.forEach(c=>{(c==null?void 0:c.investerId)===o&&(console.log(c),d+=parseInt(c==null?void 0:c.amount)||0,a+=1)})}),l(a),x(d)}catch(r){console.error("Error fetching data:",r)}})()},[o]),e.jsxs(e.Fragment,{children:[e.jsxs("td",{children:[" ",e.jsxs("div",{style:{fontSize:"15px"},className:"d-flex gap-2",children:[t," Investments"]})]}),e.jsx("td",{}),e.jsx("td",{children:b(h)})]})};export{w as default};
