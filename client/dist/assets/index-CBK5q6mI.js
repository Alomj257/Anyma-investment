import{a as te,r as m,g as se,j as t}from"./index-Dsiti9ea.js";import{a as K}from"./index-DbVH_NcX.js";import{e as ie,g as re}from"./companyService-CnaIkxcQ.js";import{S as f}from"./index-oExKzVNE.js";import{c as le,f as ae,e as ne}from"./dateTimeFormater-BDVaTzxG.js";import{n as de,a as ce}from"./investorGrossTotal-DqOj9_yd.js";import{f as xe,c as me}from"./Frame-BNJlJ0X3.js";import{r as Q}from"./right_arrow-CHTTzB5r.js";import"./iconBase-DkO8iWrC.js";const oe="/assets/Logo-02-A7S4zyOw.jpg",pe=()=>{var N,g,b,S,w,p,k,T,v,y,_,z,E,A,I,C,F,L,R,D,B,M,O,P,V,$;const{state:o}=te(),[e,Y]=m.useState(null);m.useState([]),m.useState([]);const u=(g=(N=se())==null?void 0:N.user)==null?void 0:g._id,j=s=>{ie(s)};return m.useEffect(()=>{(async()=>{var W,H,U;let a=0,q=0,c=0,h=0,d=[],x=0;const r=await re(o),Z=await ne(o);for(const l of Z){const i=(W=l==null?void 0:l.investors)==null?void 0:W.find(n=>n.investerId===u);if(i){h+=1;const n=parseFloat((i==null?void 0:i.amount)||0)+parseFloat(i==null?void 0:i.fees),G=parseFloat((i==null?void 0:i.carried)||0),X=parseFloat((i==null?void 0:i.shareholding)||0),ee=await de(n,X,parseFloat(((H=r==null?void 0:r.dealSummary)==null?void 0:H.currentValuation)||0),l==null?void 0:l.currency,G/100),J=await ce(n,X,parseFloat(((U=r==null?void 0:r.dealSummary)==null?void 0:U.currentValuation)||0),l.currency,G/100);console.log(J),a+=ee,q+=J,c+=n,d=[...d,[-1*n,l==null?void 0:l.investedDate]]}}c!==0&&(d=[...d,[c+a,new Date]],x=me(d)),Y({...r,dealSummary:{...r==null?void 0:r.dealSummary,totalInvestment:c,profitLoss:a.toFixed(2),moic:(q/h).toFixed(2)+"x",irr:x==null?void 0:x.toFixed(2),investments:h}})})()},[o,u]),t.jsxs("div",{className:"company_container",children:[t.jsxs("div",{className:"space_img",children:[t.jsx("img",{src:f+(e==null?void 0:e.cover)||oe,alt:"cover"}),t.jsx("img",{className:"w-80 h-80 cursor-pointer comp_profile",src:e!=null&&e.profile?f+(e==null?void 0:e.profile):xe,alt:"Profile_img",style:{maxWidth:"90px",maxHeight:"90px"}})]}),t.jsxs("div",{className:"about_container",children:[t.jsxs("div",{className:"company_details",children:[t.jsx("h5",{children:e==null?void 0:e.name}),t.jsx("span",{children:e==null?void 0:e.about})]}),t.jsx("div",{className:"my-3",children:t.jsx("div",{className:"bg-dark py-3 px-3 rounded d-flex justify-content-between",children:t.jsx("h5",{className:"text-white mb-0 text-capitalize",style:{fontSize:"15px"},children:"INVESTMENTS"})})}),t.jsx("div",{className:"investment_container_table",children:t.jsxs("div",{className:"investment_container_",children:[t.jsxs("div",{className:"invt_img",style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"10px"},children:[t.jsx("img",{className:"invt_img_img",src:f+(e==null?void 0:e.profile)||(e==null?void 0:e.img),alt:""}),t.jsx("img",{src:Q,className:"right_red_arrow"})]}),t.jsxs("div",{className:"invt_ftq",children:[t.jsxs("div",{children:[t.jsx("button",{className:"btn btn-sm bg-white-smoke text-dark text-nowrap",children:"ASSET CLASS"}),t.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{marginTop:"10%"},children:t.jsx("div",{className:"fw-bold p-txt",style:{textAlign:"center",fontSize:"13px"},children:(b=e==null?void 0:e.dealSummary)==null?void 0:b.asset})})]}),t.jsxs("div",{children:[t.jsx("button",{className:"btn btn-sm bg-white-smoke text-dark text-nowrap",children:"SECTOR"}),t.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{marginTop:"14%"},children:t.jsx("div",{className:"fw-bold p-txt",style:{textAlign:"center",fontSize:"13px"},children:((w=(S=e==null?void 0:e.dealSummary)==null?void 0:S.sector)==null?void 0:w.length)>8?`${(p=e==null?void 0:e.dealSummary)==null?void 0:p.sector.slice(0,8)}...`:(k=e==null?void 0:e.dealSummary)==null?void 0:k.sector})})]}),t.jsxs("div",{children:[t.jsx("button",{className:"btn btn-sm bg-white-smoke text-dark text-nowrap",children:"INVESTMENT"}),t.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{marginTop:"10%"},children:t.jsx("div",{className:"fw-bold p-txt",style:{textAlign:"center",fontSize:"13px"},children:le((T=e==null?void 0:e.dealSummary)==null?void 0:T.totalInvestment)})})]})]}),t.jsxs("div",{className:"invt_stq",children:[t.jsxs("div",{children:[t.jsx("button",{className:`btn btn-sm text-dark text-nowrap bg-white-smoke
                                 ${Number.isNaN((v=e==null?void 0:e.dealSummary)==null?void 0:v.profitLoss)?"bg-white-smoke text-dark":((y=e==null?void 0:e.dealSummary)==null?void 0:y.profitLoss)<0?"loss":"profit"}`,children:"NET PROFIT"}),t.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{marginTop:"10%"},children:t.jsx("div",{className:"fw-bold p-txt",style:{textAlign:"center",fontSize:"13px",color:((_=e==null?void 0:e.dealSummary)==null?void 0:_.profitLoss.toString())=="NaN"?"black":((z=e==null?void 0:e.dealSummary)==null?void 0:z.profitLoss)<0?"red":"green"},children:(E=e==null?void 0:e.dealSummary)==null?void 0:E.profitLoss})})]}),t.jsxs("div",{children:[t.jsx("button",{className:`btn btn-sm text-dark text-nowrap bg-white-smoke
                ${Number.isNaN((A=e==null?void 0:e.dealSummary)==null?void 0:A.moic)?"bg-white-smoke text-dark":((I=e==null?void 0:e.dealSummary)==null?void 0:I.moic)<0?"loss":"profit"}`,children:"NET MOIC"}),t.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{marginTop:"10%"},children:t.jsx("div",{className:"fw-bold p-txt",style:{textAlign:"center",fontSize:"13px",color:((C=e==null?void 0:e.dealSummary)==null?void 0:C.moic.toString())=="NaN"?"black":((F=e==null?void 0:e.dealSummary)==null?void 0:F.moic)<0?"red":"green"},children:(L=e==null?void 0:e.dealSummary)==null?void 0:L.moic})})]}),t.jsxs("div",{children:[t.jsx("button",{className:`btn btn-sm text-dark text-nowrap bg-white-smoke
                ${Number.isNaN((R=e==null?void 0:e.dealSummary)==null?void 0:R.irr)?"bg-white-smoke text-dark":((D=e==null?void 0:e.dealSummary)==null?void 0:D.irr)<0?"loss":"profit"}`,children:"NET IRR"}),t.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{marginTop:"14%"},children:t.jsx("div",{className:"fw-bold p-txt",style:{textAlign:"center",fontSize:"13px",color:((B=e==null?void 0:e.dealSummary)==null?void 0:B.irr.toString())=="NaN"?"black":((M=e==null?void 0:e.dealSummary)==null?void 0:M.irr)<0?"red":"green"},children:((O=e==null?void 0:e.dealSummary)==null?void 0:O.irr.length)>8?((P=e==null?void 0:e.dealSummary)==null?void 0:P.irr.slice(0,4))+"%":(V=e==null?void 0:e.dealSummary)==null?void 0:V.irr})})]})]}),t.jsxs("div",{className:"invt_ltq",children:[t.jsxs("div",{children:[t.jsx("button",{className:"btn btn-sm bg-white-smoke text-dark text-nowrap",children:"WEIGHT"}),t.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{marginTop:"10%"},children:t.jsx("div",{className:"fw-bold p-txt",style:{textAlign:"center",fontSize:"13px"},children:"100%"})})]}),t.jsxs("div",{children:[t.jsxs("button",{className:"btn btn-sm text-dark text-nowrap loss",onClick:()=>setisDealList(!0),children:["NÂ° of INV.",t.jsx("img",{src:Q,alt:"Right Arrow"})]}),t.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{marginTop:"10%"},children:t.jsx("div",{className:"fw-bold p-txt",style:{textAlign:"center",fontSize:"13px",color:"red"},children:($=e==null?void 0:e.dealSummary)==null?void 0:$.investments})})]})]})]})}),t.jsxs("div",{className:"belowContainer",children:[t.jsxs("div",{children:[t.jsx("div",{className:"bg-dark py-3 px-3 rounded d-flex justify-content-between",children:t.jsx("h5",{className:"text-white mb-0 text-capitalize",style:{fontSize:"15px"},children:"LATEST NEWS"})}),t.jsx("div",{className:"below_contents",children:(e==null?void 0:e.news)&&(e==null?void 0:e.news.map((s,a)=>t.jsx("div",{className:"d-flex flex-column gap-2",children:t.jsxs("div",{className:"d-flex justify-content-between flex-column",style:{marginBottom:"0.5rem"},children:[t.jsx("a",{href:s==null?void 0:s.link,className:"text-black fw-bold",style:{fontSize:"14px"},target:"_blank",rel:"noopener noreferrer",children:s==null?void 0:s.name}),t.jsx("small",{className:"text-muted tracking-normal",children:ae(s==null?void 0:s.date)})]})},a)))})]}),t.jsxs("div",{children:[t.jsx("div",{className:"bg-dark py-3 px-3 rounded d-flex justify-content-between",children:t.jsx("h5",{className:"text-white mb-0 text-capitalize",style:{fontSize:"15px"},children:"UPDATE"})}),t.jsx("div",{className:"below_contents my-3",children:(e==null?void 0:e.update)&&(e==null?void 0:e.update.map((s,a)=>t.jsxs("div",{className:"d-flex mx-2 ms-3 gap-2",style:{marginBottom:"1rem"},children:[t.jsx("div",{children:t.jsx(K,{className:"text-muted",size:20})}),t.jsxs("div",{className:"d-flex flex-column gap-1",style:{fontSize:"14px"},children:[t.jsx("small",{onClick:()=>j(s==null?void 0:s.originalname),className:"text-muted cursor-pointer",children:(s==null?void 0:s.originalname)||"CONTRACT UPDATE"}),t.jsx("small",{className:"fw-bold",children:s==null?void 0:s.date})]})]},a)))})]}),t.jsxs("div",{children:[t.jsx("div",{className:"bg-dark py-3 px-3 rounded d-flex justify-content-between",children:t.jsx("h5",{className:"text-white mb-0 text-capitalize",style:{fontSize:"15px"},children:"INVESTMENT DOCS"})}),t.jsx("div",{className:"below_contents my-3",children:(e==null?void 0:e.update)&&(e==null?void 0:e.update.map((s,a)=>t.jsxs("div",{className:"d-flex mx-2 ms-3 gap-2",style:{marginBottom:"1rem"},children:[t.jsx("div",{children:t.jsx(K,{className:"text-muted",size:20})}),t.jsxs("div",{className:"d-flex flex-column gap-1",style:{fontSize:"14px"},children:[t.jsx("small",{onClick:()=>j(s==null?void 0:s.originalname),className:"text-muted cursor-pointer",children:(s==null?void 0:s.originalname)||"INVESTMENT DOCS"}),t.jsx("small",{className:"fw-bold",children:s==null?void 0:s.date})]})]},a)))})]})]})]})]})};export{pe as default};
