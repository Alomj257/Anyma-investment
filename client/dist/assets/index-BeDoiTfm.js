import{a as Z,r as G,g as ee,j as t}from"./index---ThxQHl.js";import{a as J}from"./index-DTPMjdSb.js";import{g as te}from"./companyService-BBubZftP.js";import{S as h}from"./index-naFqRyV3.js";import{c as se,f as ie,e as le}from"./dateTimeFormater-DxVYPYlX.js";import{n as re,a as ae}from"./investorGrossTotal-S4L9jiCN.js";import{f as de,c as ne}from"./Frame-BNJlJ0X3.js";import{r as xe}from"./right_arrow-CHTTzB5r.js";import"./iconBase-BwtrK68j.js";const ce="/assets/Logo-02-A7S4zyOw.jpg",Se=()=>{var j,u,N,g,b,S,w,v,p,k,T,y,z,A,E,_,I,C,F,R,L,D,P,B,O,M;const{state:m}=Z(),[e,K]=G.useState(null),f=(u=(j=ee())==null?void 0:j.user)==null?void 0:u._id;return G.useEffect(()=>{(async()=>{var W,$,q;let a=0,V=0,x=0,o=0,n=[],c=0;const l=await te(m),Q=await le(m);for(const r of Q){const i=(W=r==null?void 0:r.investors)==null?void 0:W.find(d=>d.investerId===f);if(i){o+=1;const d=parseFloat((i==null?void 0:i.amount)||0)+parseFloat(i==null?void 0:i.fees),U=parseFloat((i==null?void 0:i.carried)||0),H=parseFloat((i==null?void 0:i.shareholding)||0),Y=await re(d,H,parseFloat((($=l==null?void 0:l.dealSummary)==null?void 0:$.currentValuation)||0),r==null?void 0:r.currency,U/100),X=await ae(d,H,parseFloat(((q=l==null?void 0:l.dealSummary)==null?void 0:q.currentValuation)||0),r.currency,U/100);console.log(X),a+=Y,V+=X,x+=d,n=[...n,[-1*d,r==null?void 0:r.investedDate]]}}x!==0&&(n=[...n,[x+a,new Date]],c=ne(n)),K({...l,dealSummary:{...l==null?void 0:l.dealSummary,totalInvestment:x,profitLoss:a.toFixed(2),moic:(V/o).toFixed(2)+"x",irr:c==null?void 0:c.toFixed(2),investments:o}})})()},[m,f]),t.jsxs("div",{className:"company_container",children:[t.jsxs("div",{className:"space_img",children:[t.jsx("img",{src:h+(e==null?void 0:e.cover)||ce,alt:"cover"}),t.jsx("img",{className:"w-80 h-80 cursor-pointer comp_profile",src:e!=null&&e.profile?h+(e==null?void 0:e.profile):de,alt:"Profile_img",style:{maxWidth:"90px",maxHeight:"90px"}})]}),t.jsxs("div",{className:"about_container",children:[t.jsxs("div",{className:"company_details",children:[t.jsx("h5",{children:e==null?void 0:e.name}),t.jsx("span",{children:e==null?void 0:e.about})]}),t.jsx("div",{className:"my-3",children:t.jsx("div",{className:"bg-dark py-3 px-3 rounded d-flex justify-content-between",children:t.jsx("h5",{className:"text-white mb-0 text-capitalize",style:{fontSize:"15px"},children:"INVESTMENTS"})})}),t.jsx("div",{className:"investment_container_table",children:t.jsxs("div",{className:"investment_container",children:[t.jsx("div",{className:"invt_img",style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"10px"},children:t.jsx("img",{src:h+(e==null?void 0:e.profile)||(e==null?void 0:e.img),style:{width:"98%",maxWidth:"150px",padding:"5px"},alt:""})}),t.jsxs("div",{className:"invt_ftq",children:[t.jsxs("div",{children:[t.jsx("button",{className:"btn btn-sm bg-white-smoke text-dark text-nowrap",children:"ASSET CLASS"}),t.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{marginTop:"10%"},children:t.jsx("div",{className:"fw-bold p-txt",style:{textAlign:"center",fontSize:"13px"},children:(N=e==null?void 0:e.dealSummary)==null?void 0:N.asset})})]}),t.jsxs("div",{children:[t.jsx("button",{className:"btn btn-sm bg-white-smoke text-dark text-nowrap",children:"SECTOR"}),t.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{marginTop:"14%"},children:t.jsx("div",{className:"fw-bold p-txt",style:{textAlign:"center",fontSize:"13px"},children:((b=(g=e==null?void 0:e.dealSummary)==null?void 0:g.sector)==null?void 0:b.length)>8?`${(S=e==null?void 0:e.dealSummary)==null?void 0:S.sector.slice(0,8)}...`:(w=e==null?void 0:e.dealSummary)==null?void 0:w.sector})})]}),t.jsxs("div",{children:[t.jsx("button",{className:"btn btn-sm bg-white-smoke text-dark text-nowrap",children:"INVESTMENT"}),t.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{marginTop:"10%"},children:t.jsx("div",{className:"fw-bold p-txt",style:{textAlign:"center",fontSize:"13px"},children:se((v=e==null?void 0:e.dealSummary)==null?void 0:v.totalInvestment)})})]})]}),t.jsxs("div",{className:"invt_stq",children:[t.jsxs("div",{children:[t.jsx("button",{className:`btn btn-sm text-dark text-nowrap bg-white-smoke
                                 ${Number.isNaN((p=e==null?void 0:e.dealSummary)==null?void 0:p.profitLoss)?"bg-white-smoke text-dark":((k=e==null?void 0:e.dealSummary)==null?void 0:k.profitLoss)<0?"loss":"profit"}`,children:"NET PROFIT"}),t.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{marginTop:"10%"},children:t.jsx("div",{className:"fw-bold p-txt",style:{textAlign:"center",fontSize:"13px",color:((T=e==null?void 0:e.dealSummary)==null?void 0:T.profitLoss.toString())=="NaN"?"black":((y=e==null?void 0:e.dealSummary)==null?void 0:y.profitLoss)<0?"red":"green"},children:(z=e==null?void 0:e.dealSummary)==null?void 0:z.profitLoss})})]}),t.jsxs("div",{children:[t.jsx("button",{className:`btn btn-sm text-dark text-nowrap bg-white-smoke
                ${Number.isNaN((A=e==null?void 0:e.dealSummary)==null?void 0:A.moic)?"bg-white-smoke text-dark":((E=e==null?void 0:e.dealSummary)==null?void 0:E.moic)<0?"loss":"profit"}`,children:"NET MOIC"}),t.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{marginTop:"10%"},children:t.jsx("div",{className:"fw-bold p-txt",style:{textAlign:"center",fontSize:"13px",color:((_=e==null?void 0:e.dealSummary)==null?void 0:_.moic.toString())=="NaN"?"black":((I=e==null?void 0:e.dealSummary)==null?void 0:I.moic)<0?"red":"green"},children:(C=e==null?void 0:e.dealSummary)==null?void 0:C.moic})})]}),t.jsxs("div",{children:[t.jsx("button",{className:`btn btn-sm text-dark text-nowrap bg-white-smoke
                ${Number.isNaN((F=e==null?void 0:e.dealSummary)==null?void 0:F.irr)?"bg-white-smoke text-dark":((R=e==null?void 0:e.dealSummary)==null?void 0:R.irr)<0?"loss":"profit"}`,children:"NET IRR"}),t.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{marginTop:"14%"},children:t.jsx("div",{className:"fw-bold p-txt",style:{textAlign:"center",fontSize:"13px",color:((L=e==null?void 0:e.dealSummary)==null?void 0:L.irr.toString())=="NaN"?"black":((D=e==null?void 0:e.dealSummary)==null?void 0:D.irr)<0?"red":"green"},children:((P=e==null?void 0:e.dealSummary)==null?void 0:P.irr.length)>8?((B=e==null?void 0:e.dealSummary)==null?void 0:B.irr.slice(0,8))+"...%":(O=e==null?void 0:e.dealSummary)==null?void 0:O.irr})})]})]}),t.jsxs("div",{className:"invt_ltq",children:[t.jsxs("div",{children:[t.jsx("button",{className:"btn btn-sm bg-white-smoke text-dark text-nowrap",children:"Weight"}),t.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{marginTop:"10%"},children:t.jsx("div",{className:"fw-bold p-txt",style:{textAlign:"center",fontSize:"13px"}})})]}),t.jsxs("div",{children:[t.jsxs("button",{className:"btn btn-sm text-dark text-nowrap loss",onClick:()=>setisDealList(!0),children:["NÂ° of INV.",t.jsx("img",{src:xe,alt:"Right Arrow"})]}),t.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{marginTop:"10%"},children:t.jsx("div",{className:"fw-bold p-txt",style:{textAlign:"center",fontSize:"13px",color:"red"},children:(M=e==null?void 0:e.dealSummary)==null?void 0:M.investments})})]})]})]})}),t.jsxs("div",{className:"belowContainer",children:[t.jsxs("div",{children:[t.jsx("div",{className:"bg-dark py-3 px-3 rounded d-flex justify-content-between",children:t.jsx("h5",{className:"text-white mb-0 text-capitalize",style:{fontSize:"15px"},children:"LATEST NEWS"})}),t.jsx("div",{className:"below_contents",children:(e==null?void 0:e.news)&&(e==null?void 0:e.news.map((s,a)=>t.jsx("div",{className:"d-flex flex-column gap-2",children:t.jsxs("div",{className:"d-flex justify-content-between flex-column",style:{marginBottom:"0.5rem"},children:[t.jsx("a",{href:s==null?void 0:s.link,className:"text-black fw-bold",style:{fontSize:"14px"},target:"_blank",rel:"noopener noreferrer",children:s==null?void 0:s.name}),t.jsx("small",{className:"text-muted tracking-normal",children:ie(s==null?void 0:s.date)})]})},a)))})]}),t.jsxs("div",{children:[t.jsx("div",{className:"bg-dark py-3 px-3 rounded d-flex justify-content-between",children:t.jsx("h5",{className:"text-white mb-0 text-capitalize",style:{fontSize:"15px"},children:"UPDATE"})}),t.jsx("div",{className:"below_contents my-3",children:(e==null?void 0:e.update)&&(e==null?void 0:e.update.map((s,a)=>t.jsxs("div",{className:"d-flex mx-2 ms-3 gap-2",style:{marginBottom:"1rem"},children:[t.jsx("div",{children:t.jsx(J,{className:"text-muted",size:20})}),t.jsxs("div",{className:"d-flex flex-column gap-1",style:{fontSize:"14px"},children:[t.jsx("small",{className:"text-muted",children:" CONTRACT UPDATE"}),t.jsx("small",{className:"fw-bold",children:s==null?void 0:s.date})]})]},a)))})]}),t.jsxs("div",{children:[t.jsx("div",{className:"bg-dark py-3 px-3 rounded d-flex justify-content-between",children:t.jsx("h5",{className:"text-white mb-0 text-capitalize",style:{fontSize:"15px"},children:"INVESTMENT DOCS"})}),t.jsx("div",{className:"below_contents my-3",children:(e==null?void 0:e.update)&&(e==null?void 0:e.update.map((s,a)=>t.jsxs("div",{className:"d-flex mx-2 ms-3 gap-2",style:{marginBottom:"1rem"},children:[t.jsx("div",{children:t.jsx(J,{className:"text-muted",size:20})}),t.jsxs("div",{className:"d-flex flex-column gap-1",style:{fontSize:"14px"},children:[t.jsx("small",{className:"text-muted",children:" CONTRACT UPDATE"}),t.jsx("small",{className:"fw-bold",children:s==null?void 0:s.date})]})]},a)))})]})]})]})]})};export{Se as default};
